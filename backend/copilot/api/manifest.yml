name: api
type: Load Balanced Web Service

image:
  build: Dockerfile
  port: 3000

http:
  path: '/'
  healthcheck:
    path: /
    success_codes: '200,301,302'
    interval: 30s
    timeout: 10s
    healthy_threshold: 2
    unhealthy_threshold: 5

cpu: 256
memory: 512

count: 1

variables:
  PORT: 3000
  NODE_ENV: production
  MONGODB_URI: mongodb://admin:admin123@mongodb.campanha-polgo-production.local:27017/campanha-polgo?authSource=admin
  CORS_ORIGIN: '*'
  API_VERSION: v1

secrets:
  # Add secrets via: copilot secret init
  # Example: DB_PASSWORD: /copilot/${COPILOT_APPLICATION_NAME}/${COPILOT_ENVIRONMENT_NAME}/secrets/DB_PASSWORD

network:
  vpc:
    placement: private
